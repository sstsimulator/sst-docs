<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-elements/ember/CreatingMotifs" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Creating Motifs | The Structural Simulation Toolkit</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://sstsimulator.github.io/sst-docs/img/sst-logo-small.png"><meta data-rh="true" name="twitter:image" content="https://sstsimulator.github.io/sst-docs/img/sst-logo-small.png"><meta data-rh="true" property="og:url" content="https://sstsimulator.github.io/sst-docs/docs/elements/ember/CreatingMotifs"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Creating Motifs | The Structural Simulation Toolkit"><meta data-rh="true" name="description" content="Ember"><meta data-rh="true" property="og:description" content="Ember"><link data-rh="true" rel="icon" href="/sst-docs/img/sst-logo-small.png"><link data-rh="true" rel="canonical" href="https://sstsimulator.github.io/sst-docs/docs/elements/ember/CreatingMotifs"><link data-rh="true" rel="alternate" href="https://sstsimulator.github.io/sst-docs/docs/elements/ember/CreatingMotifs" hreflang="en"><link data-rh="true" rel="alternate" href="https://sstsimulator.github.io/sst-docs/docs/elements/ember/CreatingMotifs" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://B6IFEXV9WE-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/sst-docs/blog/rss.xml" title="The Structural Simulation Toolkit RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/sst-docs/blog/atom.xml" title="The Structural Simulation Toolkit Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="The Structural Simulation Toolkit" href="/sst-docs/opensearch.xml">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/sst-docs/assets/css/styles.b8cd684f.css">
<script src="/sst-docs/assets/js/runtime~main.133301e0.js" defer="defer"></script>
<script src="/sst-docs/assets/js/main.eb7f7387.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/sst-docs/"><div class="navbar__logo"><img src="/sst-docs/img/sst-logo-small.png" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/sst-docs/img/sst-logo-small.png" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">The Structural Simulation Toolkit</b></a><a href="https://sstsimulator.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Main<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" sidebarid="guides" href="/sst-docs/docs/guides/runningSST">Guides</a><a class="navbar__item navbar__link" sidebarid="core" href="/sst-docs/docs/core/component/introduction">SST-Core API</a><a class="navbar__item navbar__link" sidebarid="config" href="/sst-docs/docs/config">Configuration</a><a class="navbar__item navbar__link" sidebarid="elements" href="/sst-docs/docs/elements/intro">Elements</a><a class="navbar__item navbar__link" sidebarid="tools" href="/sst-docs/docs/tools/commandLine/sst-info">Tools</a><a class="navbar__item navbar__link" sidebarid="community" href="/sst-docs/docs/community">Community</a><a class="navbar__item navbar__link" href="/sst-docs/help">Help</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/intro">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/ariel/intro">ariel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/balar/intro">balar</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/cacheTracer/intro">cacheTracer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/cassini/intro">cassini</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/cramsim/intro">cramSim</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/sst-docs/docs/elements/ember/intro">ember</a><button aria-label="Collapse sidebar category &#x27;ember&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sst-docs/docs/elements/ember/QuickStart">QuickStart Motif Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/sst-docs/docs/elements/ember/CreatingMotifs">Creating Motifs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sst-docs/docs/elements/ember/RunningMotifs">Running Motifs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sst-docs/docs/elements/ember/OTF2Ember">Capturing and using OTF2 Traces with Ember</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/firefly/intro">firefly</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/gensa/intro">gensa</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/hermes/intro">hermes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/iris/intro">iris</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/juno/intro">juno</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/kingsley/intro">kingsley</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/llyr/intro">llyr</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/macro/intro">macro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/maskmpi/intro">mask-mpi</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/sst-docs/docs/elements/memHierarchy/intro">memHierarchy</a><button aria-label="Expand sidebar category &#x27;memHierarchy&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/mercury/intro">mercury</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/merlin/intro">merlin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/messier/intro">messier</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/miranda/intro">miranda</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/mmu/intro">mmu</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/opal/intro">opal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/osseous/intro">osseous</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/prospero/intro">prospero</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/rdmaNic/intro">rdmaNic</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/samba/intro">samba</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/serrano/intro">serrano</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/shogun/intro">shogun</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/simpleElementExample/intro">simpleElementExample</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/simpleExternalElement/intro">simpleExternalElement</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/simpleSimulation/intro">simpleSimulation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/thornhill/intro">thornhill</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/vanadis/intro">vanadis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/vaultsim/intro">vaultsim</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sst-docs/docs/elements/zodiac/intro">zodiac</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/sst-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/sst-docs/docs/elements/ember/intro"><span itemprop="name">ember</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Creating Motifs</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Creating Motifs</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ember">Ember<a href="#ember" class="hash-link" aria-label="Direct link to Ember" title="Direct link to Ember">​</a></h2>
<p><a href="http://sst-simulator.org/SSTPages/SSTElementEmber/" target="_blank" rel="noopener noreferrer">Ember</a> is a library representing various network communications. It accepts events from <em>motifs</em> to drive network activities.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="motif">Motif<a href="#motif" class="hash-link" aria-label="Direct link to Motif" title="Direct link to Motif">​</a></h2>
<p>Motifs are condensed, efficient generators for simulating different kinds of communication/computation patterns.
The motif presented here does no real work, but more detailed motifs can be found in sst-elements/src/sst/elements/ember/mpi/motifs/.</p>
<p>Motifs are executed as follows:</p>
<ol>
<li>The motif generator is initialized (the constructor)</li>
<li>The generate function is invoked, places events on the event queue, and returns either true or false</li>
<li>The events on the event queue are processed.</li>
<li>If the generate function in step 2 returns false, go to step 2. Otherwise, the motif is complete.</li>
</ol>
<p>Motifs are intended to be run as a &#x27;job submission.&#x27;
The generate function models an entire iteration of an application, using the event queue to mix compute and MPI operations in every iteration.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="register-subcomponent">Register Subcomponent<a href="#register-subcomponent" class="hash-link" aria-label="Direct link to Register Subcomponent" title="Direct link to Register Subcomponent">​</a></h3>
<p>Ember motifs need to be <a href="/sst-docs/docs/core/eli/register/sst_eli_register_subcomponent">registered as an SST subcomponent</a>. Motif SubComponents should implement the <code>SST::Ember::EmberGenerator</code> API. The ELI registration macro must be placed in a public section of the SubComponent header.
For example:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">SST_ELI_REGISTER_SUBCOMPONENT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Example</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ember&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ExampleMotif&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token function" style="color:rgb(130, 170, 255)">SST_ELI_ELEMENT_VERSION</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Performs an idle on the node. No traffic can be generated.&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        SST</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">Ember</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">EmberGenerator</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The parameters of this function are:</p>
<ol>
<li>Class associated with this Motif</li>
<li>Library that the SubComponent belongs to</li>
<li>Identifier of the Motif. This name, prefixed by the library name (&#x27;ember&#x27;), will be used by SST to identify the subcomponent. Note that the end of this parameter must always be &#x27;Motif&#x27;.</li>
<li>SST elements version</li>
<li>Comment describing what the motif does</li>
<li>EmberGenerator API</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="writing-a-constructor">Writing a constructor<a href="#writing-a-constructor" class="hash-link" aria-label="Direct link to Writing a constructor" title="Direct link to Writing a constructor">​</a></h3>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token class-name" style="color:rgb(255, 203, 107)">EmberExample</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">EmberExample</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">SST</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">ComponentId_t id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> Params</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> params</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token function" style="color:rgb(130, 170, 255)">EmberMessagePassingGenerator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> params</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Example&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <a href="/sst-docs/docs/core/component/subcomponent/constructor">constructor</a> also reads parameters from the python script.
The params are passed through the python file in the form: <code>ep.addMotif(&quot;Example firstParam=100 secondParam=200&quot;)</code>. Note no space is allowed before or after the = operator. Parameters read from the python file will be prepended with &quot;arg.&quot; before being passed to the C++ file. i.e. &quot;firstParam&quot; becomes &quot;arg.firstParam&quot;.
The constructor can be used to perform the setup operations necessary for the generating function.</p>
<p>The params can be parsed in the C++ file with <code>firstParam = params.find&lt;uint32_t&gt;(&quot;arg.firstParam&quot;, 100);</code> where the name of the parameter is &quot;firstParam&quot;.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="writing-a-generate-function">Writing a generate() function<a href="#writing-a-generate-function" class="hash-link" aria-label="Direct link to Writing a generate() function" title="Direct link to Writing a generate() function">​</a></h3>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">bool</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Example</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">generate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">queue</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">EmberEvent</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> evQ</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The generate function is the &#x27;main&#x27; function of a Motif.
If the python file invokes an <code>addMotif</code>, the generating function will be invoked until the generate function returns true.
Once the generate function returns, the events queued in the evQ variable will be performed.</p>
<p>The generate function takes an event queue as a parameter. The event queue allows the user to include computation operations and MPI events in the simulation. Motifs are intended to be designed so that every call to generate() mimics an entire iteration of the application. The events that can be added to the event queue are listed in subsequent sections.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="user-defined-events">User-defined events<a href="#user-defined-events" class="hash-link" aria-label="Direct link to User-defined events" title="Direct link to User-defined events">​</a></h2>
<p>These functions allow the user to control how the simulation estimates computation time.</p>
<ul>
<li><code>enQ_compute(Queue&amp;, uint64_t nanoSecondDelay)</code>   -- The delay by the expected cost of the compute operation in nanoSeconds (without actually computing it)</li>
<li><code>enQ_compute( Queue&amp; q, std::function&lt;uint64_t()&gt; func)</code>; -- A function is passed as a parameter and invoked. It returns a 64-bit unsigned integer that indicates the simulation delay associated with invoking the function (in nanoseconds).</li>
<li><code>enQ_getTime(evQ, &amp;m_startTime)</code> -- sets m_startTime to the current time</li>
</ul>
<p>There are two types of compute functions that can be enqueued.</p>
<p>The first computation operation takes a 64-bit integer as a parameter. This parameter is the amount of time needed in nanoseconds to perform the computation. The simulator then delays by that number of nanoseconds as if the actual computation had taken place.
The second compute takes a function as a parameter. When the event is processed, the function is invoked. The function returns the amount of time needed to perform the compute operation. The simulation is delayed by the return value of the function. The time delay could be estimated through a heuristic or measured through representative computation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mpi-events">MPI Events<a href="#mpi-events" class="hash-link" aria-label="Direct link to MPI Events" title="Direct link to MPI Events">​</a></h2>
<p>We list the supported MPI events below. For more detail, see MPI API documentation.</p>
<ul>
<li><code>enQ_init(evQ)</code>  --  MPI  initialize</li>
<li><code>enQ_fini(evQ)</code> -- MPI finalize</li>
<li><code>enQ_rank(evQ, m_newComm[0], &amp;m_new_rank)</code> -- MPI rank</li>
<li><code>enQ_size(evQ, m_newComm[0], &amp;m_new_size)</code> --   MPI size</li>
<li><code>enQ_send(evQ, x_neg, x_xferSize, 0, GroupWorld)</code>  --  MPI send</li>
<li><code>enQ_recv(evQ, x_neg, x_xferSize, 0, GroupWorld)</code>  --  MPI  recv</li>
<li><code>enQ_isend(evQ, next_comm_rank, itemsThisPhase, 0, GroupWorld, &amp;requests[next_request])</code> --  MPI isend</li>
<li><code>enQ_irecv(evQ, xface_down, items_per_cell * sizeof_cell * ny * nz, 0, GroupWorld, &amp;requests[nextRequest])</code> --  MPI irecv</li>
<li><code>enQ_cancel(evQ, m_req[i])</code> -- MPI cancel</li>
<li><code>enQ_sendrecv(evQ, m_sendBuf, m_messageSize, DATA_TYPE, destRank(), 0xdeadbeef, m_recvBuf, m_messageSize, DATA_TYPE, srcRank(),  0xdeadbeef, GroupWorld, &amp;m_resp)</code>  --  MPI send or recv</li>
<li><code>enQ_wait(evQ,  req)</code>  --  MPI wait</li>
<li><code>enQ_waitany(evQ, m_req.size(), &amp;m_req[0], &amp;m_indx, &amp;m_resp)</code> --  MPI waitany</li>
<li><code>enQ_waitall(evQ, 1, &amp;m_req, (MessageResponse**)&amp;m_resp)</code> --  MPI waitall</li>
<li><code>enQ_barrier(evQ, GroupWorld)</code> -- MPI barrier</li>
<li><code>enQ_bcast(evQ, m_sendBuf, m_count, DOUBLE, m_root, GroupWorld)</code> -- MPI broadcast</li>
<li><code>enQ_scatter(evQ, m_sendBuf, m_sendCnt, m_sendDsp.data(), LONG, m_recvBuf, m_count, LONG, m_root, GroupWorld)</code></li>
<li><code>enQ_scatterv(evQ, m_sendBuf, &amp;m_sendCnts[0], m_sendDsp.data(), LONG, m_recvBuf, m_count, LONG, m_root, GroupWorld)</code> -- MPI Scatter variable message size</li>
<li><code>enQ_reduce( evQ, m_sendBuf, m_recvBuf, m_count, DOUBLE, MP::SUM, m_redRoot, GroupWorld)</code></li>
<li><code>enQ_allreduce(evQ, m_sendBuf, m_recvBuf, m_count, DOUBLE, m_op, GroupWorld)</code> -- MPI allreduce function</li>
<li><code>enQ_alltoall(evQ, m_sendBuf, m_colSendCnt, &amp;m_colSendDsp_f[0], DOUBLE, m_colComm)</code> -- MPI alltoall with constant message size</li>
<li><code>enQ_alltoallv(evQ, m_sendBuf, &amp;m_colSendCnts_f[0], &amp;m_colSendDsp_f[0], DOUBLE, m_colComm)</code> -- MPI alltoall with varying message sizes</li>
<li><code>enQ_allgather(evQ, m_sendBuf, m_count, INT, m_recvBuf, m_count, INT, GroupWorld)</code> --  MPI allgather with messages of constant size</li>
<li><code>enQ_allgatherv(evQ, m_sendBuf, m_sendCnt, INT, m_recvBuf, &amp;m_recvCnts[0], &amp;m_recvDsp[0], INT, GroupWorld)</code> --  MPI allgather with messages of varying sizes</li>
<li><code>enQ_commSplit(evQ, *comm, color, key, newComm)</code> -- Splits the MPI comm</li>
<li><code>enQ_commCreate(evQ, GroupWorld, m_rowGrpRanks, &amp;m_rowComm)</code> -- Creates MPI Com</li>
<li><code>enQ_commDestroy(evQ, m_rowComm)</code> --Destroys MPI comm</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/sstsimulator/sst-docs/edit/master/docs/../docs/elements/ember/CreatingMotifs.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-09-28T22:39:10.000Z" itemprop="dateModified">Sep 28, 2023</time></b> by <b>grvosku</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/sst-docs/docs/elements/ember/QuickStart"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">QuickStart Motif Guide</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/sst-docs/docs/elements/ember/RunningMotifs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Running Motifs</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ember" class="table-of-contents__link toc-highlight">Ember</a></li><li><a href="#motif" class="table-of-contents__link toc-highlight">Motif</a><ul><li><a href="#register-subcomponent" class="table-of-contents__link toc-highlight">Register Subcomponent</a></li><li><a href="#writing-a-constructor" class="table-of-contents__link toc-highlight">Writing a constructor</a></li><li><a href="#writing-a-generate-function" class="table-of-contents__link toc-highlight">Writing a generate() function</a></li></ul></li><li><a href="#user-defined-events" class="table-of-contents__link toc-highlight">User-defined events</a></li><li><a href="#mpi-events" class="table-of-contents__link toc-highlight">MPI Events</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/sst-docs/img/sst-logo-small.png" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/sst-docs/img/sst-logo-small.png" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></div><div class="footer__copyright">Copyright © 2009-2024 NTESS</div></div></div></footer></div>
</body>
</html>