"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[59670],{28453:(e,s,t)=>{t.d(s,{R:()=>o,x:()=>a});var n=t(96540);const i={},r=n.createContext(i);function o(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),n.createElement(r.Provider,{value:s},e.children)}},73952:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"guides/features/signal","title":"Signal handling","description":"SST handles the SIGINT, SIGTERM, SIGUSR1, and SIGUSR2 signals and also uses SIGALRM to execute actions that occur on a timer. Actions are defined based on the RealTimeAction class. SST provides default actions for each of the signals and allows users to override the default with custom actions for SIGUSR1, SIGUSR2, and SIGALRM.","source":"@site/../docs/guides/features/signal.md","sourceDirName":"guides/features","slug":"/guides/features/signal","permalink":"/sst-docs/docs/guides/features/signal","draft":false,"unlisted":false,"editUrl":"https://github.com/sstsimulator/sst-docs/edit/master/docs/../docs/guides/features/signal.md","tags":[],"version":"current","lastUpdatedBy":"grvosku","lastUpdatedAt":1747692370000,"frontMatter":{"title":"Signal handling"},"sidebar":"guides","previous":{"title":"Checkpoint and restart","permalink":"/sst-docs/docs/guides/features/checkpoint"},"next":{"title":"Tips and Tricks","permalink":"/sst-docs/docs/category/tips-and-tricks"}}');var i=t(74848),r=t(28453);const o={title:"Signal handling"},a=void 0,c={},l=[{value:"The <code>RealTimeAction</code> class",id:"the-realtimeaction-class",level:2},{value:"Custom RealTimeActions",id:"custom-realtimeactions",level:2},{value:"SIGUSR1/SIGUSR2",id:"sigusr1sigusr2",level:3},{value:"SIGALRM",id:"sigalrm",level:3}];function d(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.p,{children:["SST handles the ",(0,i.jsx)(s.code,{children:"SIGINT"}),", ",(0,i.jsx)(s.code,{children:"SIGTERM"}),", ",(0,i.jsx)(s.code,{children:"SIGUSR1"}),", and ",(0,i.jsx)(s.code,{children:"SIGUSR2"})," signals and also uses ",(0,i.jsx)(s.code,{children:"SIGALRM"})," to execute actions that occur on a timer. Actions are defined based on the ",(0,i.jsx)(s.code,{children:"RealTimeAction"})," class. SST provides default actions for each of the signals and allows users to override the default with custom actions for ",(0,i.jsx)(s.code,{children:"SIGUSR1"}),", ",(0,i.jsx)(s.code,{children:"SIGUSR2"}),", and ",(0,i.jsx)(s.code,{children:"SIGALRM"}),"."]}),"\n",(0,i.jsxs)(s.p,{children:["Signals are only detected and handled during SST's ",(0,i.jsx)(s.a,{href:"/sst-docs/docs/guides/concepts/lifecycle",children:"run phase"}),". Signals sent earlier may be missed. Signals sent later will be ignored."]}),"\n",(0,i.jsxs)(s.h2,{id:"the-realtimeaction-class",children:["The ",(0,i.jsx)(s.code,{children:"RealTimeAction"})," class"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"RealTimeAction"})," objects are actions that execute in response to a signal. SST provides several actions and element libraries may additionally provide their own custom actions. The actions provided by SST are:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Exit simulation"})," (",(0,i.jsx)(s.code,{children:"sst.rt.exit.clean"}),") - Simulation exits SST's run stage and proceeds to the complete stage."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Exit simulation with error"}),"(",(0,i.jsx)(s.code,{children:"sst.rt.exit.emergency"}),") - Simulation exits immediately with an error and does not attempt to finish the simulation."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"SST-Core Status"}),"(",(0,i.jsx)(s.code,{children:"sst.rt.status.core"}),") - SST-Core reports the simulated time."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Simulation Status"}),"(",(0,i.jsx)(s.code,{children:"sst.rt.status.all"}),") - SST-Core reports the simulated time and ",(0,i.jsx)(s.a,{href:"/sst-docs/docs/core/component/lifecycle/printStatus",children:(0,i.jsx)(s.code,{children:"printStatus()"})})," is called on every Component in the simulation."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Heartbeat"}),"(",(0,i.jsx)(s.code,{children:"sst.rt.heartbeat"}),") - SST-Core reports the simulated time and some profiling metrics (size of memory pools, time in synchronization, etc.)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Checkpoint"}),"(",(0,i.jsx)(s.code,{children:"sst.rt.checkpoint"}),") - Creates a checkpoint."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Interactive Console"}),"(",(0,i.jsx)(s.code,{children:"sst.rt.interactive"}),") - Pause simulation and drop into an interactive console to view simulation state. This action requires that an SST console be specified using the command line option ",(0,i.jsx)(s.code,{children:"--interactive-console"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:'The table below shows the default action for each signal. The "Command line control" column shows command line options that are available to override the default action.'}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Signal"}),(0,i.jsx)(s.th,{children:"Default RealTimeAction"}),(0,i.jsx)(s.th,{children:"Description"}),(0,i.jsx)(s.th,{children:"Command line control"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"SIGINT"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"sst.rt.exit.emergency"})}),(0,i.jsx)(s.td,{children:"Exit simulation immediately with an error"}),(0,i.jsx)(s.td,{children:"None"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"SIGTERM"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"sst.rt.exit.emergency"})}),(0,i.jsx)(s.td,{children:"Exit simulation immediately with an error"}),(0,i.jsx)(s.td,{children:"None"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"SIGUSR1"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"sst.rt.status.core"})}),(0,i.jsx)(s.td,{children:"Report status of SST-Core"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"--sigusr1"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"SIGUSR2"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"sst.rt.status.all"})}),(0,i.jsx)(s.td,{children:"Report status of SST-Core and all Components"}),(0,i.jsx)(s.td,{children:(0,i.jsx)(s.code,{children:"--sigusr2"})})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"SIGALRM"}),(0,i.jsx)(s.td,{children:"-"}),(0,i.jsx)(s.td,{children:"-"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"--checkpoint-wall-period"}),", ",(0,i.jsx)(s.code,{children:"--heartbeat-wall-period"}),", ",(0,i.jsx)(s.code,{children:"--exit-after"}),", ",(0,i.jsx)(s.code,{children:"--sigalrm"})]})]})]})]}),"\n",(0,i.jsx)(s.p,{children:"When SST receives a signal in a serial simulations, it executes the associated RealTimeAction as soon as the currently-executing event or clock handler returns control to SST-Core. Actions in parallel simulations are deferred until SST-Core's next synchronization point. Therefore, actions may perform global read and synchronization operations."}),"\n",(0,i.jsxs)(s.admonition,{type:"caution",children:[(0,i.jsxs)(s.p,{children:["When running SST with OpenMPI, signals sent to the ",(0,i.jsx)(s.code,{children:"mpirun"})," process are not always handled as expected. This can be avoided by sending the signal directly to one of the SST ranks."]}),(0,i.jsxs)(s.p,{children:["When sent to ",(0,i.jsx)(s.code,{children:"mpirun"}),":"]}),(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"SIGUSR1 and SIGUSR2 signals may be duplicated in SST."}),"\n",(0,i.jsx)(s.li,{children:"SIGINT and SIGTERM are not always delivered to the SST processes so emergency shutdown may not occur before SST is terminated."}),"\n"]})]}),"\n",(0,i.jsx)(s.h2,{id:"custom-realtimeactions",children:"Custom RealTimeActions"}),"\n",(0,i.jsx)(s.admonition,{type:"note",children:(0,i.jsx)(s.p,{children:"Custom RealTimeActions were introduced in SST 14.1. The API stable as of SST 15.0 but new functionality will be added as needed."})}),"\n",(0,i.jsx)(s.h3,{id:"sigusr1sigusr2",children:"SIGUSR1/SIGUSR2"}),"\n",(0,i.jsx)(s.p,{children:"Actions can be associated with either SIGUSR signal by passing the name of the action to SST on the command line. For example, this simulation will run the heartbeat action when a SIGUSR1 is received:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sh",children:"$ sst --sigusr1=sst.rt.heartbeat sst_config_file.py\n"})}),"\n",(0,i.jsx)(s.h3,{id:"sigalrm",children:"SIGALRM"}),"\n",(0,i.jsx)(s.p,{children:"SST provides three command line options to enable actions that are commonly executed on a recurring interval. These use the SIGALRM signal and the options are:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"--exit-after=<TIME>"})," Executes ",(0,i.jsx)(s.code,{children:"sst.rt.exit.clean"})," after the specified ",(0,i.jsx)(s.code,{children:"<TIME>"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"--checkpoint-wall-period=<TIME>"})," Creates a checkpoint (using ",(0,i.jsx)(s.code,{children:"sst.rt.checkpoint"}),") on the recurring interval specified by ",(0,i.jsx)(s.code,{children:"<TIME>"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"--heartbeat-wall-period=<TIME>"})," Executes the heartbeat action (",(0,i.jsx)(s.code,{children:"sst.rt.heartbeat"}),") on the recurring interval specified by ",(0,i.jsx)(s.code,{children:"<TIME>"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["In addition, custom actions, both those provided by SST and those provided in element libraries, can be registered with a time interval using the ",(0,i.jsx)(s.code,{children:"--sigalrm"})," option.\nThese actions take a time interval as a parameter."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sh",metastring:'title="These are equivalent command lines"',children:'$ sst --checkpoint-wall-period=1h --heartbeat-wall-period=15m sst_config_file.py\n$ sst --sigalrm="sst.rt.checkpoint(interval=1h)" --sigalrm="sst.rt.heartbeat(interval=15m)" sst_config_file.py\n$ sst --sigalrm="sst.rt.checkpoint(interval=1h);sst.rt.heartbeat(interval=15m)" sst_config_file.py\n'})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-sh",metastring:"title=\"Example of registering a custom action called 'elemlib.custom_action'\"",children:'$ sst --sigalrm="elemlib.custom_action(interval=01:30)" sst_config_file.py\n'})})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);