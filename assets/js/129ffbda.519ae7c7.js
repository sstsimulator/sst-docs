"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5814],{27629:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>l,toc:()=>r});var s=n(74848),i=n(28453);const a={title:"Simulation configuration file"},o="Usage via a simple example",l={id:"guides/configuration/pythonConfigGuide",title:"Simulation configuration file",description:"SST provides a Python module to allow interaction with the simulation build system. This Python module is used in the input Python script for the purpose of building the graph that represents the simulation to be performed. This is done by providing classes and functions to define the elements of the simulation, their parameters, and how they are interconnected. The user can also optionally enable statistics and create a user specified partitioning for the described model. Behind the scenes, these classes will build the C\\+\\+ data structure that is used by SST to construct the simulation model.",source:"@site/../docs/guides/configuration/pythonConfigGuide.md",sourceDirName:"guides/configuration",slug:"/guides/configuration/pythonConfigGuide",permalink:"/sst-docs/docs/guides/configuration/pythonConfigGuide",draft:!1,unlisted:!1,editUrl:"https://github.com/sstsimulator/sst-docs/edit/master/docs/../docs/guides/configuration/pythonConfigGuide.md",tags:[],version:"current",lastUpdatedBy:"grvosku",lastUpdatedAt:1736199966e3,frontMatter:{title:"Simulation configuration file"},sidebar:"guides",previous:{title:"Configuring your first simulation",permalink:"/sst-docs/docs/guides/configuration/configTutorial"},next:{title:"Concepts",permalink:"/sst-docs/docs/category/concepts"}},c={},r=[{value:"Imports",id:"imports",level:3},{value:"Components",id:"components",level:3},{value:"Links",id:"links",level:3},{value:"Statistics",id:"statistics",level:3},{value:"Enabling Statistic Generation",id:"enabling-statistic-generation",level:4},{value:"Statistic Format and Destination",id:"statistic-format-and-destination",level:4},{value:"Enabling Statistics",id:"enabling-statistics",level:4},{value:"SST Command-line Arguments",id:"sst-command-line-arguments",level:3},{value:"Discovering available libraries and documentation",id:"discovering-available-libraries-and-documentation",level:3},{value:"Element Library Extensions",id:"element-library-extensions",level:2},{value:"JSON",id:"json",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"SST provides a Python module to allow interaction with the simulation build system. This Python module is used in the input Python script for the purpose of building the graph that represents the simulation to be performed. This is done by providing classes and functions to define the elements of the simulation, their parameters, and how they are interconnected. The user can also optionally enable statistics and create a user specified partitioning for the described model. Behind the scenes, these classes will build the C++ data structure that is used by SST to construct the simulation model."}),"\n",(0,s.jsxs)(t.p,{children:["The SST-Core Python module is defined in cpython and is only available in the Python interpreter launched within a running SST executable. The module is accessed by importing the ",(0,s.jsx)(t.code,{children:"sst"})," module. This can be done in a number of ways. The two most common being:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-py",children:"# Import SST Python module using sst. prefix\nimport sst\n# Import SST Python module members into current namespace\nfrom sst import *\n"})}),"\n",(0,s.jsx)(t.p,{children:"Within this module, there are a number of available classes and global functions. The available classes are: Component, SubComponent, Link, StatisticOutput, StatisticGroup, and UnitAlgebra. The global functions are divided between general functions and functions operating on or returning one of the available objects. The links below document the available classes in the SST Python module and the global functions."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"SST Python Module"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/sst-docs/docs/config/",children:"Global functions"})," (",(0,s.jsx)(t.em,{children:"General functions that apply to the simulation instance"}),")"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/sst-docs/docs/config/component/classes",children:"Component and SubComponent"})," (",(0,s.jsx)(t.em,{children:"Create and parameterize Components and SubComponents"}),")"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/sst-docs/docs/config/link/",children:"Link"})," (",(0,s.jsx)(t.em,{children:"Create and connect Links"}),")"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/sst-docs/docs/config/stats/overview",children:"Statistic"})," (",(0,s.jsx)(t.em,{children:"Enable statistics, set options on statistic output, etc."}),")"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/sst-docs/docs/config/stats/object/statisticObject",children:"StatisticObject"})," (",(0,s.jsx)(t.em,{children:"Parameterize a specific statistic"}),")"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/sst-docs/docs/config/stats/output/statisticOutput",children:"StatisticOutput"})," (",(0,s.jsx)(t.em,{children:"Parameterize the output format for statistics"}),")"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/sst-docs/docs/config/stats/group/statisticGroup",children:"StatisticGroup"})," (",(0,s.jsx)(t.em,{children:"Create and parameterize groups of statistics"}),")"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/sst-docs/docs/config/unitalgebra/",children:"UnitAlgebra"})," (",(0,s.jsx)(t.em,{children:"Perform math on values with units"}),")"]}),"\n"]}),"\n",(0,s.jsx)(t.h1,{id:"usage-via-a-simple-example",children:"Usage via a simple example"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.em,{children:"This example is based on sst-elements/src/sst/elements/simpleElementExample/tests/example0.py"})}),"\n",(0,s.jsx)(t.p,{children:"Full documentation can be found at the links above, this section describes basic usage only. In the following input file, we define a graph consisting of two components, named 'c0' and 'c1', which are connected by a single link. The names are arbitrary, user-selected strings. Links are bidirectional."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-py",children:'1   # Import the SST module\n2   import sst\n3   \n4   # Create two components of type "simpleElementExample.example0"\n5   component0 = sst.component("c0", "simpleElementExample.example0")\n6   component1 = sst.component("c1", "simpleElementExample.example0")\n7   \n8   # Parameters defined in a dictionary \n9   params = { "eventsToSend" : 50, "eventSize" : 32 }\n10\n11  # Pass parameters to component0 and component1\n12  component0.addParams(params)\n13  component1.addParams(params)\n14\n15  # Create a link between component0 and component1\n16  link = sst.Link("component_link")\n17  link.connect( (component0, "port", "1ns"), (component1, "port", "1ns") )\n18\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Here is a picture of the system created by the script. The link, ",(0,s.jsx)(t.code,{children:"component_link"}),", allows ",(0,s.jsx)(t.code,{children:"c0"})," and ",(0,s.jsx)(t.code,{children:"c1"})," to exchange events with each other during simulation."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"A picture of the system described by the Python file shown above",src:n(54652).A+"",width:"1526",height:"1517"})}),"\n",(0,s.jsx)(t.h3,{id:"imports",children:"Imports"}),"\n",(0,s.jsxs)(t.p,{children:["Line 2 above imports the ",(0,s.jsx)(t.code,{children:"sst"})," module. Additional Python modules may be imported if desired."]}),"\n",(0,s.jsx)(t.h3,{id:"components",children:"Components"}),"\n",(0,s.jsxs)(t.p,{children:["An SST Component is a class in the ",(0,s.jsx)(t.code,{children:"sst"})," module.  Its constructor takes the name of the component (defined by the user), as well as its type (defined by the library developer)."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-py",children:'component0 = sst.Component("c0", "simpleElementExample.example0")\n'})}),"\n",(0,s.jsx)(t.p,{children:'Here, the user has created a component with the name \'c0\'. This name will be used to reference the component in SST output, including statistics and error reporting. The component\'s type is "simpleElementExample.example0", that is, the "example0" component available from the "simpleElementExample" library.'}),"\n",(0,s.jsxs)(t.p,{children:["Component parameters are specified by passing a name and value to ",(0,s.jsx)(t.code,{children:"addParam()"}),", or a dictionary of parameters to ",(0,s.jsx)(t.code,{children:"addParams()"}),". In the example above, both components take identical parameters and the same dictionary is passed to both in lines 12 and 13. An equivalent way to pass parameters would be:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-py",children:'component0.addParam("eventsToSend", "50")\ncomponent0.addParam("eventSize", "32")\n'})}),"\n",(0,s.jsx)(t.h3,{id:"links",children:"Links"}),"\n",(0,s.jsxs)(t.p,{children:["Links are classes in the ",(0,s.jsx)(t.code,{children:"sst"})," module as well.  They are created with just a user-defined name."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-py",children:'link = sst.Link("component_link")\n'})}),"\n",(0,s.jsxs)(t.p,{children:["To connect two components via a link, one can either pass the link object to each component's ",(0,s.jsx)(t.code,{children:"addLink()"})," method, or call ",(0,s.jsx)(t.code,{children:"connect()"})," on the link object, passing two tuples, each containing a component, its port name, and link latency. The port name is defined by the component developer and can be found by looking at the component documentation."]}),"\n",(0,s.jsx)(t.p,{children:"The following two examples are equivalent ways to connect component0 and component1 from the example:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-py",children:'link = sst.Link("component_link")\n\ncomponent0.addLink(link, "port", "10ns")\ncomponent1.addLink(link, "port", "10ns")\n'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-py",children:'link = sst.Link("component_link")\n\nlink.connect((component0, "port", "10ns"), (component1, "port", "10ns"))\n'})}),"\n",(0,s.jsx)(t.h3,{id:"statistics",children:"Statistics"}),"\n",(0,s.jsx)(t.p,{children:"Many SST components (although not simpleElementExample.example0) provide statistic output. Users can define the output frequency, format, type (e.g., histogram versus an accumulator), as well as which statistics to output in the Python input file. The following example, based on sst-elements/src/sst/elements/simpleElementExample/tests/example1.py, enables statistics on the 'example1' component in simpleElementExample."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-py",children:'1   import sst\n2   \n3   component0 = sst.component("c0", "simpleElementExample.example1")\n4   component1 = sst.component("c1", "simpleElementExample.example1")\n5   \n6   params = { "eventsToSend" : 50, "eventSize" : 32 }\n7\n8   component0.addParams(params)\n9   component1.addParams(params)\n10\n11  link = sst.Link("component_link")\n12  link.connect( (component0, "port", "1ns"), (component1, "port", "1ns") )\n13\n14  # Enable statistics generation for those with verbosity level less than or equal to 7\n15  sst.setStatisticLoadLevel(7)\n16\n17  # Configure output format\n18  sst.setStatisticOuput("sst.statOuputConsole")\n19  \n20  # Specify which statistics to enable\n21  sst.enableAllStatisticsForComponentType("simpleElementExample.example1")\n'})}),"\n",(0,s.jsx)(t.h4,{id:"enabling-statistic-generation",children:"Enabling Statistic Generation"}),"\n",(0,s.jsx)(t.p,{children:"By default, no statistics are generated. To enable statistics, you must set the statistic load level, as shown above in line 15. Statistics generally range in verbosity from 1 to 7. 0 means all statistics are disabled."}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsx)(t.p,{children:"If Statistic Load Level is not set, all statistics will be disabled"})}),"\n",(0,s.jsx)(t.h4,{id:"statistic-format-and-destination",children:"Statistic Format and Destination"}),"\n",(0,s.jsx)(t.p,{children:'In the example, statistic output is sent to stdout ("statOutputConsole"). In general, the output can be configured by setting the format and/or destination as follows:'}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-py",children:'sst.setStatisticOutput("outputname", {"param_1" : "value_1",\n                                      "param_n" : "value_n" \n                                      } )\n\nsst.setStatisticOutputOptions({"param_1" : "value_1", \n                               "param_n" : "value_n" \n                               } )\n\nsst.setStatisticOutputOption("param", "value")\n'})}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsx)(t.p,{children:'If Statistic Output is not set, the default will be "sst.statOutputConsole"'})}),"\n",(0,s.jsx)(t.p,{children:"For example, to generate CSV statistics you might use this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-py",children:'sst.setStatisticLoadLevel(7)\nsst.setStatisticOutput("sst.statOutputCSV", {"filepath" : "./TestOutput.csv",\n                                             "separator" : ", " } )\nsst.setStatisticOutputOption("outputsimtime", "1")\nsst.setStatisticOutputOption("outputrank", "1")\n'})}),"\n",(0,s.jsx)(t.h4,{id:"enabling-statistics",children:"Enabling Statistics"}),"\n",(0,s.jsx)(t.p,{children:"In addition to setting the global statistic load level, you must specify which statistics to enable in order to generate them. Line 21 in the example enables all statistics for any component of type 'simpleElementExample.example1'. As all components in the example are of the same type, this enables all possible statistics. Other ways to enable statistics include:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Specifying a specific statistic on a specific component"}),"\n",(0,s.jsx)(t.li,{children:"All statistics on a component (by Component Name or by Component Type)"}),"\n",(0,s.jsx)(t.li,{children:"Individual statistics on component  (by Component Name or by Component Type)"}),"\n",(0,s.jsx)(t.li,{children:"All statistics on all components"}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["Functions to enable statistics take an optional parameters list which allows users to configure the output frequency and/or collection type of the statistic (e.g., accumulator, histogram), as well as any statistic type-specific parameters. By default, all statistics are output once at the end of simulation and are of the accumulator type. See ",(0,s.jsx)(t.a,{href:"../../config/stats/overview",children:"General Notes on Statistics"})," for details."]}),"\n",(0,s.jsx)(t.admonition,{type:"warning",children:(0,s.jsx)(t.p,{children:"Enabling statistics must occur after the related components are created in the Python file."})}),"\n",(0,s.jsx)(t.p,{children:"An example of a more complex statistic enables might look like this:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-py",children:'# These components don\'t actually exist in SST: example only!\ncompA = sst.Component("statTestA", "ElementExample.StatisticsComponent1")\ncompB = sst.Component("statTestB", "ElementExample.StatisticsComponent2")\ncompC = sst.Component("statTestC", "ElementExample.StatisticsComponent3")\ncompD = sst.Component("statTestD", "ElementExample.StatisticsComponent3")\ncompE = sst.Component("statTestE", "ElementExample.StatisticsComponent3")\ncompF = sst.Component("statTestF", "ElementExample.StatisticsComponent4")\n\n# Enable all statistics with load level <= 6. \n# Statistics with load level > 6 can still be enabled but ONLY if\n# they are enabled specifically by name\nsst.statisticLoadLevel(6)\n\n# Enable two statistics named \'statname1\' and \'statname4\' on component \'compA\'.\n# Since these are enabled by name, they will be enabled even if their load level > 6\n# These should be output every 100ns in simulated time from 0ns to 800ns.\ncompA.enableStatistics(["statname1", "statname4"], \n                       {"type" : "sst.AccumulatorStatistic", \n                        "rate" : "100 ns", \n                        "stopat" : "800 ns" })\n\n# Enable all statistics on \'compB\' with load level <= 6 and output them every 500ms in simulated time.\ncompB.enableAllStatistics({"type" : "sst.AccumulatorStatistic", \n                           "rate" : "500ms" })\n\n# Enable all statistics (with load level <= 6) for components of type \'StatisticComponent3\' (i.e., compC-E)\n# All of these statistics will be collected as histograms with 41 bins of size 10. \n# The min bin is \'10-19\' and any value above the largest bin will be captured in that bin.\nsst.enableAllStatisticsForComponentType("ElementExample.StatisticsComponent3", \n                                       {"type":"sst.HistogramStatistic",\n                                        "minvalue" : "10",\n                                        "binwidth" : "10", \n                                        "numbins"  : "41", \n                                        "IncludeOutOfBounds" : "1"})\n\n# Enable all statistics on the component named \'StatTestF\' (i.e., compF)\n# Again, only statistics with load level <= 6 will be enabled\nsst.enableAllStatisticsForComponentName("StatTestF")\n'})}),"\n",(0,s.jsx)(t.h3,{id:"sst-command-line-arguments",children:"SST Command-line Arguments"}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsxs)(t.p,{children:['The string passed on the SST command-line argument "--model-options" is parsed and becomes available to the model configuration file via the standard Python command-line argument mechanism of ',(0,s.jsx)(t.code,{children:"sys.argv"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["For example, if ",(0,s.jsx)(t.code,{children:"foo.py"})," contains:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-py",children:"import sst\nimport sys\nprint sys.argv\nsst.ext()\n"})}),"\n",(0,s.jsx)(t.p,{children:"This could be the result:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sh",children:"$ sst --model-options=\"-h -x bar\" foo.py\n['sstsim.x', '-h', '-x', 'bar']\n"})}),"\n",(0,s.jsxs)(t.p,{children:["An alternative way to pass command-line arguments is by appending a ",(0,s.jsx)(t.code,{children:"--"})," followed by the arguments to the sst command line, such as:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sh",children:"$ sst foo.py -- -h -x bar\n"})}),"\n",(0,s.jsx)(t.h3,{id:"discovering-available-libraries-and-documentation",children:"Discovering available libraries and documentation"}),"\n",(0,s.jsxs)(t.p,{children:["SST Element libraries register information about their components, subcomponents, ports, subcomponent slots, parameters, and statistics with the SST-Core. This information can be queried using the command-line utility, ",(0,s.jsx)(t.code,{children:"sst-info"}),'. The output can be filtered by passing the name of a library, or specific component/subcomponent in "lib.element" format to the utility.']}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sh",children:"$ sst-info                                  # Output: All documentation about all libraries registered with the core\n$ sst-info -q                               # Output: (quiet) A list of component and subcomponent names for all libraries registered with the Core\n$ sst-info simpleElementExample             # Output: All documentation about the library 'simpleElementExample'\n$ sst-info simpleElementExample.example0    # Output: All documentation about the component 'simpleElementExample.example0'\n$ sst-info -i                               # Enter an interactive console to query the SST information. Requires the ncurses library.\n"})}),"\n",(0,s.jsx)(t.h2,{id:"element-library-extensions",children:"Element Library Extensions"}),"\n",(0,s.jsxs)(t.p,{children:["Element library developers may choose to add functionality to the Python environment to simplify configuration for specific libraries.  For example, the Merlin element library provides a module to automatically generate components and links for standard network topologies (ring, mesh, dragonfly, etc.). This additional functionality would show up under a sub-module to SST. For example: ",(0,s.jsx)(t.code,{children:"import sst.merlin"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"json",children:"JSON"}),"\n",(0,s.jsx)(t.p,{children:"JSON can be used instead of Python to describe the simulation configuration. Currently, this method limits the ability to enable statistics. Documentation of JSON configuration files is in progress."})]})}function m(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},54652:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/pythonconfig_guide_ex0_graph-c40286ad588b28bcb1ec2d575cfb9072.png"},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>l});var s=n(96540);const i={},a=s.createContext(i);function o(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);